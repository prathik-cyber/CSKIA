<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Gallery - CSKIA</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Champion Shotokan Karate Indian Association Gallery - View our training sessions, events, and community moments." />

  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&family=Roboto:wght@300;400;700&display=swap" as="style" onload="this.rel='stylesheet'" />
  <noscript>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet" />
  </noscript>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <link rel="stylesheet" href="./styles.css" />

  <style>
    /* Gallery-specific styles */
    
    /* Ensure preloader doesn't block content */
    .preloader {
      display: none !important;
    }

    header {
      display: block;
      visibility: visible;
      opacity: 1;
    }

    main {
      display: block;
      visibility: visible;
      opacity: 1;
    }

    footer {
      display: block;
      visibility: visible;
      opacity: 1;
    }

    #gallery-section {
      min-height: 50vh;
      padding: 56px 0;
      display: block;
      opacity: 1 !important;
      transform: translateY(0) !important;
      visibility: visible !important;
    }

    .gallery-container {
      max-width: var(--maxw);
      margin: 0 auto;
      padding: 0 18px;
    }

    .section-head.gallery-head {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
      margin-bottom: 40px;
      text-align: center;
    }

    .section-head.gallery-head h2 {
      font-family: 'Oswald', sans-serif;
      margin: 0;
      font-size: 2rem;
      color: var(--panel);
      border: none;
      padding: 0;
    }

    .section-head.gallery-head p {
      color: var(--muted);
      margin: 0;
    }

    /* CAROUSEL */
    .carousel {
      position: relative;
      overflow: hidden;
      border-radius: var(--radius);
      margin-bottom: 40px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }

    .carousel-slides {
      display: flex;
      transition: transform 0.6s ease;
    }

    .carousel-slide {
      min-width: 100%;
      height: 450px;
    }

    .carousel-slide img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .carousel-nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(139,0,0,0.8);
      border: none;
      color: #fff;
      width: 45px;
      height: 45px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 18px;
      transition: background 0.3s ease, transform 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .carousel-nav:hover {
      background: var(--gold);
      transform: translateY(-50%) scale(1.1);
    }

    .prev { left: 15px; }
    .next { right: 15px; }

    .carousel-counter {
      position: absolute;
      bottom: 15px;
      right: 15px;
      background: rgba(139,0,0,0.9);
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 14px;
      color: var(--gold);
      font-weight: 600;
    }

    .carousel-controls {
      display: flex;
      justify-content: center;
      gap: 10px;
      padding: 20px 0;
    }

    .carousel-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #ddd;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .carousel-dot.active {
      background: var(--gold);
      transform: scale(1.3);
    }

    /* GRID */
    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 18px;
      margin-top: 30px;
    }

    .gallery-item {
      position: relative;
      border-radius: var(--radius);
      overflow: hidden;
      cursor: pointer;
      transition: transform 0.4s ease-out;
      box-shadow: 0 6px 18px rgba(0,0,0,.35);
    }

    .gallery-item:hover {
      transform: translateY(-8px);
    }

    .gallery-item img {
      width: 100%;
      aspect-ratio: 1;
      object-fit: cover;
      border-radius: var(--radius);
    }

    @media (max-width: 768px) {
      .gallery-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      .carousel-slide { height: 320px; }
      .section-head.gallery-head h2 { font-size: 1.6rem; }
    }

    @media (max-width: 600px) {
      .gallery-grid {
        grid-template-columns: 1fr;
      }
      .carousel-slide { height: 260px; }
      .section-head.gallery-head h2 { font-size: 1.4rem; }
    }

    /* LIGHTBOX/MODAL */
    .lightbox {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      z-index: 2000;
      align-items: center;
      justify-content: center;
      animation: fadeIn 0.3s ease;
    }

    .lightbox.active {
      display: flex;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .lightbox-content {
      position: relative;
      max-width: 90%;
      max-height: 90vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }
  </style>
</head>

<body>

<!-- Preloader -->
<div class="preloader" id="preloader" role="status" aria-live="polite">
  <div class="logo">CSKIA</div>
</div>

<!-- Header -->
<header role="banner">
  <div class="nav-row container" role="navigation" aria-label="Main navigation">
    <div class="brand">
      <a href="index.html" aria-label="Homepage">
        <img src="./images/cskia-logo.jpg" alt="CSKIA logo" loading="lazy" />
      </a>
      <h1>Champion Shotokan Karate<br><small style="font-size:.6rem;color:#f1f1f1;opacity:.85">Indian Association</small></h1>
    </div>
    <nav>
      <ul id="navlist" role="menubar" aria-label="Primary">
        <li><a href="index.html#home">Home</a></li>
        <li><a href="index.html#about">About</a></li>
        <li><a href="index.html#upcoming-events">Events</a></li>
        <li><a href="index.html#instructors">Instructors</a></li>
        <li><a href="index.html#contact">Contact</a></li>
      </ul>
      <button class="hamburger" id="hamburger" aria-expanded="false" aria-controls="mobileNav" aria-label="Toggle menu">
        <span></span><span></span><span></span>
      </button>
    </nav>
  </div>
  <div id="mobileNav" class="mobile-nav" aria-hidden="true">
    <ul id="navlist-mobile" role="menubar" aria-label="Mobile navigation">
      <li><a href="index.html#home">Home</a></li>
      <li><a href="index.html#about">About</a></li>
      <li><a href="index.html#upcoming-events">Events</a></li>
      <li><a href="index.html#instructors">Instructors</a></li>
      <li><a href="index.html#contact">Contact</a></li>
    </ul>
  </div>
</header>

<!-- Main -->
<main id="maincontent">
  <section id="gallery-section" class="container" aria-label="Gallery">
    <div class="gallery-container">
      <div class="section-head gallery-head">
        <h2>Gallery</h2>
        <p class="muted">View our training sessions, events, and community moments.</p>
        <a href="index.html" class="btn" style="margin-top: 15px;"><i class="fas fa-arrow-left"></i> Back to Home</a>
      </div>

      <!-- CAROUSEL -->
      <div class="carousel">
        <div class="carousel-slides" id="carouselSlides"></div>

        <button class="carousel-nav prev" id="prevBtn" aria-label="Previous slide">
          <i class="fas fa-chevron-left"></i>
        </button>
        <button class="carousel-nav next" id="nextBtn" aria-label="Next slide">
          <i class="fas fa-chevron-right"></i>
        </button>

        <div class="carousel-counter" id="carouselCounter"></div>
      </div>

      <div class="carousel-controls" id="carouselControls"></div>

      <!-- GRID -->
      <div class="gallery-grid" id="galleryGrid"></div>
    </div>
  </section>
</main>

<!-- Lightbox Modal -->
<div class="lightbox" id="lightbox">
  <div class="lightbox-content">
    <img src="" alt="" class="lightbox-img" id="lightboxImg">
    <button class="lightbox-close" id="lightboxClose"><i class="fas fa-times"></i></button>
    <button class="lightbox-nav lightbox-prev" id="lightboxPrev"><i class="fas fa-chevron-left"></i></button>
    <button class="lightbox-nav lightbox-next" id="lightboxNext"><i class="fas fa-chevron-right"></i></button>
    <div class="lightbox-counter" id="lightboxCounter"></div>
  </div>
</div>

<!-- Footer -->
<footer role="contentinfo">
  <div class="footer-grid container">
    <div>
      <a href="index.html" class="footer-logo"><img src="./images/cskia-logo.jpg" alt="CSKIA logo" style="width:120px" loading="lazy" /></a>
      <p class="muted">Champion Shotokan Karate Indian Association — training and community events in Bangalore. Contact: <a href="tel:+919611693004">+91 96116 93004</a></p>
    </div>
    <div>
      <h4 style="color:#fff;margin-top:0">Quick Links</h4>
      <ul style="list-style:none;padding:0;margin:0">
        <li><a href="index.html#upcoming-events"><i class="fas fa-caret-right"></i> Upcoming Events</a></li>
        <li><a href="index.html#instructors"><i class="fas fa-caret-right"></i> Instructors</a></li>
        <li><a href="index.html#training"><i class="fas fa-caret-right"></i> Training</a></li>
        <li><a href="gallery.html"><i class="fas fa-caret-right"></i> Gallery</a></li>
      </ul>
    </div>
    <div>
      <h4 style="color:#fff;margin-top:0">Connect With Us</h4>
      <div class="socials">
        <a href="https://facebook.com/cskiaindia" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
        <a href="https://instagram.com/cskiaindia" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
        <a href="https://youtube.com/cskiaindia" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
      </div>
    </div>
  </div>
  <div style="max-width:var(--maxw);margin:18px auto 0;padding:0 18px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;border-top:1px solid rgba(255,255,255,0.1);padding-top:18px">
    <small style="color:var(--muted)">© 2025 Champion Shotokan Karate Indian Association. All Rights Reserved.</small>
  </div>
</footer>

<!-- Scripts -->
<script src="data.js"></script>
<script src="script.js"></script>

<script>
  // Gallery functionality
  document.addEventListener('DOMContentLoaded', () => {
    console.log('Gallery DOMContentLoaded event fired');
    const slides = document.getElementById('carouselSlides');
    const dotsBox = document.getElementById('carouselControls');
    const counter = document.getElementById('carouselCounter');
    const grid = document.getElementById('galleryGrid');

    console.log('Elements found:', { slides, dotsBox, counter, grid });

    const fallback = [
      { src: 'img cskia/1.png.png', alt: 'Gallery image 1' },
      { src: 'img cskia/2.png.png', alt: 'Gallery image 2' },
      { src: 'img cskia/3.png.png', alt: 'Gallery image 3' },
      { src: 'img cskia/4.png.png', alt: 'Gallery image 4' },
      { src: 'img cskia/5.png.png', alt: 'Gallery image 5' },
      { src: 'img cskia/6.png.png', alt: 'Gallery image 6' },
      { src: 'img cskia/7.png.png', alt: 'Gallery image 7' },
      { src: 'img cskia/8.png.png', alt: 'Gallery image 8' },
      { src: 'img cskia/9.png.png', alt: 'Gallery image 9' }
    ];

    let images = [];
    let index = 0;
    let dots = [];
    let lightboxIndex = 0;

    const decodeSrc = s => encodeURI(decodeURIComponent(s));

    function render(list) {
      console.log('Rendering gallery with', list.length, 'images');
      slides.innerHTML = '';
      dotsBox.innerHTML = '';
      grid.innerHTML = '';

      list.forEach((it, i) => {
        const src = decodeSrc(it.src || it);
        const alt = it.alt || `Gallery image ${i+1}`;

        // Carousel slide
        const slide = document.createElement('div');
        slide.className = 'carousel-slide';
        slide.innerHTML = `<img src="${src}" alt="${alt}" loading="lazy">`;
        slides.appendChild(slide);

        // Carousel dot
        const dot = document.createElement('div');
        dot.className = 'carousel-dot';
        dot.addEventListener('click', () => goTo(i));
        dotsBox.appendChild(dot);

        // Grid item
        const gridItem = document.createElement('div');
        gridItem.className = 'gallery-item';
        gridItem.innerHTML = `<img src="${src}" alt="${alt}" loading="lazy">`;
        gridItem.addEventListener('click', () => openLightbox(i));
        grid.appendChild(gridItem);
      });

      dots = document.querySelectorAll('.carousel-dot');
      index = 0;
      update();
    }

    function update() {
      if (!images.length) return;
      slides.style.transform = `translateX(-${index * 100}%)`;
      dots.forEach(d => d.classList.remove('active'));
      if (dots[index]) dots[index].classList.add('active');
      counter.textContent = `${index + 1} / ${images.length}`;
    }

    function goTo(i) {
      index = i;
      update();
    }

    document.getElementById('nextBtn').onclick = () => {
      if (!images.length) return;
      index = (index + 1) % images.length;
      update();
    };

    document.getElementById('prevBtn').onclick = () => {
      if (!images.length) return;
      index = (index - 1 + images.length) % images.length;
      update();
    };

    // Lightbox functions
    function openLightbox(i) {
      lightboxIndex = i;
      updateLightbox();
      document.getElementById('lightbox').classList.add('active');
    }

    function closeLightbox() {
      document.getElementById('lightbox').classList.remove('active');
    }

    function updateLightbox() {
      if (!images.length) return;
      const img = images[lightboxIndex];
      const src = decodeSrc(img.src || img);
      const alt = img.alt || `Gallery image ${lightboxIndex + 1}`;
      document.getElementById('lightboxImg').src = src;
      document.getElementById('lightboxImg').alt = alt;
      document.getElementById('lightboxCounter').textContent = `${lightboxIndex + 1} / ${images.length}`;
    }

    document.getElementById('lightboxClose').onclick = closeLightbox;
    document.getElementById('lightbox').onclick = (e) => {
      if (e.target.id === 'lightbox') closeLightbox();
    };
    document.getElementById('lightboxNext').onclick = () => {
      if (!images.length) return;
      lightboxIndex = (lightboxIndex + 1) % images.length;
      updateLightbox();
    };
    document.getElementById('lightboxPrev').onclick = () => {
      if (!images.length) return;
      lightboxIndex = (lightboxIndex - 1 + images.length) % images.length;
      updateLightbox();
    };

    // Close lightbox with Escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeLightbox();
      if (e.key === 'ArrowRight' && document.getElementById('lightbox').classList.contains('active')) {
        lightboxIndex = (lightboxIndex + 1) % images.length;
        updateLightbox();
      }
      if (e.key === 'ArrowLeft' && document.getElementById('lightbox').classList.contains('active')) {
        lightboxIndex = (lightboxIndex - 1 + images.length) % images.length;
        updateLightbox();
      }
    });

    // Try to load from JSON, fall back to hardcoded list
    fetch('images-data.json')
      .then(r => { if (!r.ok) throw new Error('bad'); return r.json(); })
      .then(data => {
        const list = (data && data.images) ? data.images.map(it => ({ src: it.src, alt: it.alt })) : fallback;
        images = list.filter(it => !(it.src || '').toLowerCase().includes('copy'));
        if (!images.length) images = fallback;
        render(images);
      })
      .catch(() => {
        images = fallback;
        render(images);
      });

    // Mobile menu toggle
    const hamburger = document.getElementById('hamburger');
    if (hamburger) {
      const mobileNav = document.getElementById('mobileNav');
      hamburger.addEventListener('click', () => {
        const expanded = hamburger.getAttribute('aria-expanded') === 'true';
        hamburger.setAttribute('aria-expanded', !expanded);
        mobileNav.setAttribute('aria-hidden', expanded);
      });
    }
  });
</script>

</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Gallery - CSKIA</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Champion Shotokan Karate Indian Association Gallery - View our training sessions, events, and community moments." />

  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&family=Roboto:wght@300;400;700&display=swap" as="style" onload="this.rel='stylesheet'" />
  <noscript>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet" />
  </noscript>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <link rel="stylesheet" href="./styles.css" />

  <style>
    /* Gallery-specific styles */
    
    /* Ensure preloader doesn't block content */
    .preloader {
      display: none !important;
    }

    header {
      display: block;
      visibility: visible;
      opacity: 1;
    }

    main {
      display: block;
      visibility: visible;
      opacity: 1;
    }

    footer {
      display: block;
      visibility: visible;
      opacity: 1;
    }

    #gallery-section {
      min-height: 50vh;
      padding: 56px 0;
      display: block;
      opacity: 1 !important;
      transform: translateY(0) !important;
      visibility: visible !important;
    }

    .gallery-container {
      max-width: var(--maxw);
      margin: 0 auto;
      padding: 0 18px;
    }

    .section-head.gallery-head {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
      margin-bottom: 40px;
      text-align: center;
    }

    .section-head.gallery-head h2 {
      font-family: 'Oswald', sans-serif;
      margin: 0;
      font-size: 2rem;
      color: var(--panel);
      border: none;
      padding: 0;
    }

    .section-head.gallery-head p {
      color: var(--muted);
      margin: 0;
    }

    /* CAROUSEL */
    .carousel {
      position: relative;
      overflow: hidden;
      border-radius: var(--radius);
      margin-bottom: 40px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }

    .carousel-slides {
      display: flex;
      transition: transform 0.6s ease;
    }

    .carousel-slide {
      min-width: 100%;
      height: 450px;
    }

    .carousel-slide img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .carousel-nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(139,0,0,0.8);
      border: none;
      color: #fff;
      width: 45px;
      height: 45px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 18px;
      transition: background 0.3s ease, transform 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .carousel-nav:hover {
      background: var(--gold);
      transform: translateY(-50%) scale(1.1);
    }

    .prev { left: 15px; }
    .next { right: 15px; }

    .carousel-counter {
      position: absolute;
      bottom: 15px;
      right: 15px;
      background: rgba(139,0,0,0.9);
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 14px;
      color: var(--gold);
      font-weight: 600;
    }

    .carousel-controls {
      display: flex;
      justify-content: center;
      gap: 10px;
      padding: 20px 0;
    }

    .carousel-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #ddd;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .carousel-dot.active {
      background: var(--gold);
      transform: scale(1.3);
    }

    /* GRID */
    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 18px;
      margin-top: 30px;
    }

    .gallery-item {
      position: relative;
      border-radius: var(--radius);
      overflow: hidden;
      cursor: pointer;
      transition: transform 0.4s ease-out;
      box-shadow: 0 6px 18px rgba(0,0,0,.35);
    }

    .gallery-item:hover {
      transform: translateY(-8px);
    }

    .gallery-item img {
      width: 100%;
      aspect-ratio: 1;
      object-fit: cover;
      border-radius: var(--radius);
    }

    @media (max-width: 768px) {
      .gallery-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      .carousel-slide { height: 320px; }
      .section-head.gallery-head h2 { font-size: 1.6rem; }
    }

    @media (max-width: 600px) {
      .gallery-grid {
        grid-template-columns: 1fr;
      }
      .carousel-slide { height: 260px; }
      .section-head.gallery-head h2 { font-size: 1.4rem; }
    }

    /* LIGHTBOX/MODAL */
    .lightbox {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      z-index: 2000;
      align-items: center;
      justify-content: center;
      animation: fadeIn 0.3s ease;
    }

    .lightbox.active {
      display: flex;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .lightbox-content {
      position: relative;
      max-width: 90%;
      max-height: 90vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .lightbox-img {
      max-width: 100%;
      max-height: 90vh;
      object-fit: contain;
      border-radius: 8px;
    }

    .lightbox-close {
      position: absolute;
      top: 20px;
      right: 30px;
      color: #fff;
      font-size: 40px;
      cursor: pointer;
      background: rgba(139, 0, 0, 0.8);
      border: none;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.3s ease;
    }

    .lightbox-close:hover {
      background: var(--gold);
    }

    .lightbox-nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(139, 0, 0, 0.8);
      border: none;
      color: #fff;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 24px;
      transition: background 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .lightbox-nav:hover {
      background: var(--gold);
    }

    .lightbox-prev {
      left: 20px;
    }

    .lightbox-next {
      right: 20px;
    }

    .lightbox-counter {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(139, 0, 0, 0.9);
      color: var(--gold);
      padding: 8px 16px;
      border-radius: 20px;
      font-weight: 600;
    }
  </style>
</head>

<body>

<!-- Preloader -->
<div class="preloader" id="preloader" role="status" aria-live="polite">
  <div class="logo">CSKIA</div>
</div>

<!-- Header -->
<header role="banner">
  <div class="nav-row container" role="navigation" aria-label="Main navigation">
    <div class="brand">
      <a href="index.html" aria-label="Homepage">
        <img src="./images/cskia-logo.jpg" alt="CSKIA logo" loading="lazy" />
      </a>
      <h1>Champion Shotokan Karate<br><small style="font-size:.6rem;color:#f1f1f1;opacity:.85">Indian Association</small></h1>
    </div>
    <nav>
      <ul id="navlist" role="menubar" aria-label="Primary">
        <li><a href="index.html#home">Home</a></li>
        <li><a href="index.html#about">About</a></li>
        <li><a href="index.html#upcoming-events">Events</a></li>
        <li><a href="index.html#instructors">Instructors</a></li>
        <li><a href="index.html#contact">Contact</a></li>
      </ul>
      <button class="hamburger" id="hamburger" aria-expanded="false" aria-controls="mobileNav" aria-label="Toggle menu">
        <span></span><span></span><span></span>
      </button>
    </nav>
  </div>
  <div id="mobileNav" class="mobile-nav" aria-hidden="true">
    <ul id="navlist-mobile" role="menubar" aria-label="Mobile navigation">
      <li><a href="index.html#home">Home</a></li>
      <li><a href="index.html#about">About</a></li>
      <li><a href="index.html#upcoming-events">Events</a></li>
      <li><a href="index.html#instructors">Instructors</a></li>
      <li><a href="index.html#contact">Contact</a></li>
    </ul>
  </div>
</header>

<!-- Main -->
<main id="maincontent">
  <section id="gallery-section" class="container" aria-label="Gallery">
    <div class="gallery-container">
      <div class="section-head gallery-head">
        <h2>Gallery</h2>
        <p class="muted">View our training sessions, events, and community moments.</p>
        <a href="index.html" class="btn" style="margin-top: 15px;"><i class="fas fa-arrow-left"></i> Back to Home</a>
      </div>

      <!-- CAROUSEL -->
      <div class="carousel">
        <div class="carousel-slides" id="carouselSlides"></div>

        <button class="carousel-nav prev" id="prevBtn" aria-label="Previous slide">
          <i class="fas fa-chevron-left"></i>
        </button>
        <button class="carousel-nav next" id="nextBtn" aria-label="Next slide">
          <i class="fas fa-chevron-right"></i>
        </button>

        <div class="carousel-counter" id="carouselCounter"></div>
      </div>

      <div class="carousel-controls" id="carouselControls"></div>

      <!-- GRID -->
      <div class="gallery-grid" id="galleryGrid"></div>
    </div>
  </section>
</main>

<!-- Lightbox Modal -->
<div class="lightbox" id="lightbox">
  <div class="lightbox-content">
    <img src="" alt="" class="lightbox-img" id="lightboxImg">
    <button class="lightbox-close" id="lightboxClose"><i class="fas fa-times"></i></button>
    <button class="lightbox-nav lightbox-prev" id="lightboxPrev"><i class="fas fa-chevron-left"></i></button>
    <button class="lightbox-nav lightbox-next" id="lightboxNext"><i class="fas fa-chevron-right"></i></button>
    <div class="lightbox-counter" id="lightboxCounter"></div>
  </div>
</div>

<!-- Footer -->
<footer role="contentinfo">
  <div class="footer-grid container">
    <div>
      <a href="index.html" class="footer-logo"><img src="./images/cskia-logo.jpg" alt="CSKIA logo" style="width:120px" loading="lazy" /></a>
      <p class="muted">Champion Shotokan Karate Indian Association — training and community events in Bangalore. Contact: <a href="tel:+919611693004">+91 96116 93004</a></p>
    </div>
    <div>
      <h4 style="color:#fff;margin-top:0">Quick Links</h4>
      <ul style="list-style:none;padding:0;margin:0">
        <li><a href="index.html#upcoming-events"><i class="fas fa-caret-right"></i> Upcoming Events</a></li>
        <li><a href="index.html#instructors"><i class="fas fa-caret-right"></i> Instructors</a></li>
        <li><a href="index.html#training"><i class="fas fa-caret-right"></i> Training</a></li>
        <li><a href="gallery.html"><i class="fas fa-caret-right"></i> Gallery</a></li>
      </ul>
    </div>
    <div>
      <h4 style="color:#fff;margin-top:0">Connect With Us</h4>
      <div class="socials">
        <a href="https://facebook.com/cskiaindia" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
        <a href="https://instagram.com/cskiaindia" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
        <a href="https://youtube.com/cskiaindia" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
      </div>
    </div>
  </div>
  <div style="max-width:var(--maxw);margin:18px auto 0;padding:0 18px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;border-top:1px solid rgba(255,255,255,0.1);padding-top:18px">
    <small style="color:var(--muted)">© 2025 Champion Shotokan Karate Indian Association. All Rights Reserved.</small>
  </div>
</footer>

<!-- Scripts -->
<script src="data.js"></script>
<script src="script.js"></script>

<script>
  // Gallery functionality
  document.addEventListener('DOMContentLoaded', () => {
    console.log('Gallery DOMContentLoaded event fired');
    const slides = document.getElementById('carouselSlides');
    const dotsBox = document.getElementById('carouselControls');
    const counter = document.getElementById('carouselCounter');
    const grid = document.getElementById('galleryGrid');

    console.log('Elements found:', { slides, dotsBox, counter, grid });

    const fallback = [
      { src: 'gallery/1.png.png', alt: 'Gallery image 1' },
      { src: 'gallery/2.png.png', alt: 'Gallery image 2' },
      { src: 'gallery/3.png.png', alt: 'Gallery image 3' },
      { src: 'gallery/4.png.png', alt: 'Gallery image 4' },
      { src: 'gallery/5.png.png', alt: 'Gallery image 5' },
      { src: 'gallery/6.png.png', alt: 'Gallery image 6' },
      { src: 'gallery/7.png.png', alt: 'Gallery image 7' },
      { src: 'gallery/8.png.png', alt: 'Gallery image 8' },
      { src: 'gallery/9.png.png', alt: 'Gallery image 9' }
    ];

    let images = [];
    let index = 0;
    let dots = [];
    let lightboxIndex = 0;

    const decodeSrc = s => encodeURI(decodeURIComponent(s));

    function render(list) {
      console.log('Rendering gallery with', list.length, 'images');
      slides.innerHTML = '';
      dotsBox.innerHTML = '';
      grid.innerHTML = '';

      list.forEach((it, i) => {
        const src = decodeSrc(it.src || it);
        const alt = it.alt || `Gallery image ${i+1}`;

        // Carousel slide
        const slide = document.createElement('div');
        slide.className = 'carousel-slide';
        slide.innerHTML = `<img src="${src}" alt="${alt}" loading="lazy">`;
        slides.appendChild(slide);

        // Carousel dot
        const dot = document.createElement('div');
        dot.className = 'carousel-dot';
        dot.addEventListener('click', () => goTo(i));
        dotsBox.appendChild(dot);

        // Grid item
        const gridItem = document.createElement('div');
        gridItem.className = 'gallery-item';
        gridItem.innerHTML = `<img src="${src}" alt="${alt}" loading="lazy">`;
        gridItem.addEventListener('click', () => openLightbox(i));
        grid.appendChild(gridItem);
      });

      dots = document.querySelectorAll('.carousel-dot');
      index = 0;
      update();
    }

    function update() {
      if (!images.length) return;
      slides.style.transform = `translateX(-${index * 100}%)`;
      dots.forEach(d => d.classList.remove('active'));
      if (dots[index]) dots[index].classList.add('active');
      counter.textContent = `${index + 1} / ${images.length}`;
    }

    function goTo(i) {
      index = i;
      update();
    }

    document.getElementById('nextBtn').onclick = () => {
      if (!images.length) return;
      index = (index + 1) % images.length;
      update();
    };

    document.getElementById('prevBtn').onclick = () => {
      if (!images.length) return;
      index = (index - 1 + images.length) % images.length;
      update();
    };

    // Lightbox functions
    function openLightbox(i) {
      lightboxIndex = i;
      updateLightbox();
      document.getElementById('lightbox').classList.add('active');
    }

    function closeLightbox() {
      document.getElementById('lightbox').classList.remove('active');
    }

    function updateLightbox() {
      if (!images.length) return;
      const img = images[lightboxIndex];
      const src = decodeSrc(img.src || img);
      const alt = img.alt || `Gallery image ${lightboxIndex + 1}`;
      document.getElementById('lightboxImg').src = src;
      document.getElementById('lightboxImg').alt = alt;
      document.getElementById('lightboxCounter').textContent = `${lightboxIndex + 1} / ${images.length}`;
    }

    document.getElementById('lightboxClose').onclick = closeLightbox;
    document.getElementById('lightbox').onclick = (e) => {
      if (e.target.id === 'lightbox') closeLightbox();
    };
    document.getElementById('lightboxNext').onclick = () => {
      if (!images.length) return;
      lightboxIndex = (lightboxIndex + 1) % images.length;
      updateLightbox();
    };
    document.getElementById('lightboxPrev').onclick = () => {
      if (!images.length) return;
      lightboxIndex = (lightboxIndex - 1 + images.length) % images.length;
      updateLightbox();
    };

    // Close lightbox with Escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeLightbox();
      if (e.key === 'ArrowRight' && document.getElementById('lightbox').classList.contains('active')) {
        lightboxIndex = (lightboxIndex + 1) % images.length;
        updateLightbox();
      }
      if (e.key === 'ArrowLeft' && document.getElementById('lightbox').classList.contains('active')) {
        lightboxIndex = (lightboxIndex - 1 + images.length) % images.length;
        updateLightbox();
      }
    });

    // Try to load from JSON, fall back to hardcoded list
    fetch('images-data.json')
      .then(r => { if (!r.ok) throw new Error('bad'); return r.json(); })
      .then(data => {
        const list = (data && data.images) ? data.images.map(it => ({ src: it.src, alt: it.alt })) : fallback;
        images = list.filter(it => !(it.src || '').toLowerCase().includes('copy'));
        if (!images.length) images = fallback;
        render(images);
      })
      .catch(() => {
        images = fallback;
        render(images);
      });

    // Mobile menu toggle
    const hamburger = document.getElementById('hamburger');
    if (hamburger) {
      const mobileNav = document.getElementById('mobileNav');
      hamburger.addEventListener('click', () => {
        const expanded = hamburger.getAttribute('aria-expanded') === 'true';
        hamburger.setAttribute('aria-expanded', !expanded);
        mobileNav.setAttribute('aria-hidden', expanded);
      });
    }
  });
</script>

</body>
</html>
